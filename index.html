<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Retro Web Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="A totally rad early-2000s style personal homepage." />

  <style>
    /* 2000s vibes: loud colors, gradients, bevels, shadows, and unapologetic fun */
    body {
      margin: 0;
      background:
        linear-gradient(180deg, #001f3f 0%, #003366 40%, #004c99 100%);
      color: #fff;
      font-family: "Comic Sans MS", "Trebuchet MS", Verdana, sans-serif;
    }

    /* Tiled stars background overlay for extra nostalgia */
    .tile-overlay {
      position: fixed;
      inset: 0;
      background-image:
        radial-gradient(#8ecaff 1px, transparent 2px),
        radial-gradient(#ffd500 1px, transparent 2px);
      background-size: 6px 6px, 10px 10px;
      background-position: 0 0, 3px 3px;
      opacity: 0.15;
      pointer-events: none;
    }

    header {
      text-align: center;
      padding: 12px 8px 0;
    }

    .logo {
      display: inline-block;
      padding: 10px 18px;
      border: 3px ridge #c0d8ff;
      background:
        linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,255,255,0.05));
      box-shadow: 0 0 12px rgba(0, 200, 255, 0.6), inset 0 0 6px rgba(255,255,255,0.4);
      text-shadow: 0 0 6px #9be7ff;
      font-weight: bold;
      letter-spacing: 0.5px;
      color: #eef7ff;
    }

    marquee {
      display: block;
      margin: 12px auto 16px;
      max-width: 860px;
      color: #ffff99;
      background: rgba(0, 0, 0, 0.25);
      border: 2px groove #99ccff;
      padding: 6px 10px;
    }

    /* Page layout with a classic table-ish feel */
    .container {
      max-width: 980px;
      margin: 0 auto 40px;
      border: 4px outset #99ccff;
      background: rgba(0, 0, 0, 0.2);
      box-shadow: 0 0 20px rgba(0,0,0,0.35);
    }

    .topnav {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
      background: linear-gradient(180deg, #0b2f66, #0a2754);
      border-bottom: 3px ridge #6fbaff;
      padding: 8px;
    }

    .topnav a {
      color: #e7f3ff;
      text-decoration: none;
      padding: 8px 12px;
      border: 2px outset #b7dcff;
      background: linear-gradient(180deg, #1d4f8a, #133a69);
      box-shadow: inset 0 0 6px rgba(255,255,255,0.2);
    }
    .topnav a:hover {
      color: #ffffcc;
      border-style: inset;
      filter: brightness(1.15);
    }

    .content {
      display: grid;
      grid-template-columns: 240px 1fr;
      gap: 0;
      min-height: 540px;
    }

    .sidebar {
      border-right: 3px ridge #6fbaff;
      background: linear-gradient(180deg, #0f356f, #0b2f66);
      padding: 14px;
    }

    .sidebar h3, .main h2 {
      margin: 8px 0 10px;
      color: #aee3ff;
      text-shadow: 0 0 6px rgba(175, 231, 255, 0.55);
    }

    .badge-box {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-top: 12px;
    }
    .badge {
      border: 2px groove #b7dcff;
      background: rgba(255,255,255,0.08);
      padding: 6px;
      text-align: center;
      font-size: 12px;
      color: #eaf6ff;
      box-shadow: inset 0 0 6px rgba(255,255,255,0.15);
    }

    .hit-counter {
      margin-top: 12px;
      padding: 8px;
      border: 2px groove #b7dcff;
      background: rgba(255,255,255,0.08);
      font-size: 13px;
      color: #ffffcc;
    }

    .main {
      padding: 14px 18px;
    }

    .link-list {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      margin-top: 8px;
    }

    .card {
      border: 3px double #99ccff;
      background: linear-gradient(180deg, rgba(255,255,255,0.13), rgba(255,255,255,0.03));
      padding: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.25);
    }

    .card h4 {
      margin: 0 0 8px;
      color: #d6f1ff;
      text-shadow: 0 0 5px rgba(214, 241, 255, 0.6);
    }

    .card p {
      margin: 0 0 8px;
      color: #eef7ff;
    }

    .card a {
      color: #ffff99;
      text-decoration: underline;
      font-weight: bold;
    }

    .about {
      margin-top: 18px;
      border: 3px double #ffd36f;
      background: linear-gradient(180deg, rgba(255, 211, 111, 0.18), rgba(255, 211, 111, 0.08));
      padding: 12px;
      color: #fff3d6;
    }

    .footer {
      text-align: center;
      padding: 10px 8px 16px;
      color: #dbefff;
      font-size: 12px;
    }

    .footer img {
      width: 88px;
      height: 31px;
      margin: 2px;
      image-rendering: pixelated;
    }

    .blink {
      animation: blink 1s steps(2, start) infinite;
    }
    @keyframes blink {
      0%, 49% { opacity: 1; }
      50%, 100% { opacity: 0.25; }
    }

    /* Make it workable on small screens */
    @media (max-width: 760px) {
      .content {
        grid-template-columns: 1fr;
      }
      .link-list {
        grid-template-columns: 1fr;
      }
      .topnav {
        justify-content: flex-start;
        overflow-x: auto;
      }
    }
  </style>
</head>

<body>
  <div class="tile-overlay" aria-hidden="true"></div>

  <header>
    <div class="logo">
      <span class="blink">★</span> Welcome to My Retro Web Hub <span class="blink">★</span>
    </div>

    <marquee behavior="scroll" direction="left" scrollamount="4" aria-label="Site news ticker">
      Now playing: My greatest hits from the golden age of the web — bookmark me and surf the links below!
    </marquee>
  </header>

  <div class="container">
    <nav class="topnav" aria-label="Primary">
      <a href="#home">Home</a>
      <a href="#projects">Projects</a>
      <a href="#about">About me</a>
      <a href="#guestbook">Guestbook</a>
    </nav>

    <div class="content" id="home">
      <aside class="sidebar">
        <h3>Site badges</h3>
        <div class="badge-box">
          <div class="badge">Best Viewed in 1024×768</div>
          <div class="badge">Made with ♥ and HTML</div>
          <div class="badge">Optimized for Fun</div>
          <div class="badge">No Flash Required</div>
        </div>

        <div class="hit-counter">
         <strong>Hit Counter:</strong>
         <div id="counter">You are visitor #<span id="count">0</span></div>
         <small>(Just like the old days, this counter is for vibes.)</small>
        </div>

       <div class="hit-counter" style="margin-top:12px;">
        <strong>Guestbook:</strong>
        <input type="text" id="guestName" placeholder="Your Name">
        <input type="text" id="guestMsg" placeholder="Your Message">
        <button onclick="addGuest()">Sign Guestbook</button>
        <div id="guestList" style="margin-top:10px;"></div>
       </div>
      </aside>

      <main class="main">
        <h2 id="projects">Featured projects</h2>

        <div class="link-list">
          <div class="card">
            <h4>Net Atlas Ultimate</h4>
            <p>A deep dive across the digital map—curated routes, resources, and insights.</p>
            <p><a href="https://nicholas-tritsaris.github.io/Net-Atlas-Ultimate/" target="_blank" rel="noopener">Visit Net Atlas Ultimate</a></p>
          </div>

          <div class="card">
            <h4>Net Observation Project</h4>
            <p>Notes from the wild web: patterns, behaviors, and curiosities observed online.</p>
            <p><a href="https://nicholas-tritsaris.github.io/net-observation-project/" target="_blank" rel="noopener">Explore Net Observation</a></p>
          </div>

          <div class="card">
            <h4>MC Property Encyclopedia</h4>
            <p>A reference for Minecraft property and place lore—organized, searchable, and expandable.</p>
            <p><a href="https://nicholas-tritsaris.github.io/MCPropertyEncyclopedia/" target="_blank" rel="noopener">Open MC Property Encyclopedia</a></p>
          </div>

          <div class="card">
            <h4>More soon…</h4>
            <p>New experiments and throwbacks are always on the way. Check back for updates!</p>
            <p><span style="color:#ffff99;">Bookmark this page for fresh drops.</span></p>
          </div>
          
          <div class="card">
           <h4>Retro Portal</h4>
           <p>A gateway to experiments, side projects, and creative explorations — styled with the same nostalgic theme.</p>
           <p><a href="https://nicholas-tritsaris.github.io/Portal" target="_blank" rel="noopener">Enter the Portal</a></p>
         </div>
        </div>

        <div class="about" id="about">
          <h3>About me</h3>
          <p>Hey, I’m Nicholas. I like building web-first projects that feel like exploring—maps, archives, and playful interfaces.</p>
          <p>I grew up in the era of dial-up, pop-up blockers, and personal homepages; this space nods to that spirit while still being usable today.</p>
          <p>When I’m not tinkering, I’m documenting patterns and stories from the net—because the web is as much culture as code.</p>
        </div>
      </main>
    </div>
  </div>

<footer class="footer">
  © 2000–2025 Retroverse Online • A blog about retro gaming, consoles, and 80s/90s nostalgia •
  <span class="blink">Under Perpetual Construction</span>

  <!-- Existing sticker -->
  <a class="kallistero-sticker" href="https://kallistero.neocities.org/"></a>
  <script src="https://kallistero.neocities.org/sticker.js"></script>

  <!-- Scenequeen stickers -->
  <a href="https://mars2027.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/mars.png" alt="Mars2027"></a>
  <a href="https://rxqueen.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/rxqueen.gif" alt="Rxqueen"></a>
  <a href="https://aquamiki.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/miki.jpg" alt="Aquamiki"></a>
  <a href="https://medulla.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/medulla.gif" alt="Medulla"></a>
  <a href="https://eyelessoracle.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/oracle.png" alt="Eyeless Oracle"></a>
  <a href="https://stockinganarchy.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/stock.png" alt="Stocking Anarchy"></a>
  <a href="https://cubertown.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/cuber.png" alt="Cubertown"></a>
  <a href="https://encounters-ltd.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/encounters.gif" alt="Encounters Ltd"></a>
  <a href="https://machine-cat.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/machinecat.gif" alt="Machine Cat"></a>
  <a href="https://vil333vil.neocities.org/portfolio.html#contact"><img src="https://scenequeen.neocities.org/buttons/neo/vilespace.gif" alt="Vilespace"></a>
  <a href="https://mbaetata.neocities.org/home.html"><img src="https://scenequeen.neocities.org/buttons/neo/mbaetata.png" alt="Mbaetata"></a>
  <a href="https://mysweetpiano.neocities.org/"><img src="https://scenequeen.neocities.org/p/mine/sweetpiano.gif" alt="My Sweet Piano"></a>
  <a href="https://devils.neocities.org/"><img src="https://66.media.tumblr.com/77e241f4a1e799e0b67393ea6a613507/tumblr_inline_prj2ah1Qxv1w1xdc5_1280.gif" alt="Devils"></a>
  <a href="https://tfpxe.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/tfpxe.gif" alt="TFPXE"></a>
  <a href="https://punchy.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/punchycrack.gif" alt="Punchy"></a>
  <a href="https://soups.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/soups.png" alt="Soups"></a>
  <a href="https://osaka.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/osaka.gif" alt="Osaka"></a>
  <a href="https://kkb.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/kkb.gif" alt="KKB"></a>
  <a href="https://lullabye.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/lullabye.gif" alt="Lullabye"></a>
  <a href="https://vomitboyz.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/vomitboyz.png" alt="Vomitboyz"></a>
  <a href="https://chamaedaphne.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/chae.gif" alt="Chamaedaphne"></a>
  <a href="https://empeethree.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/sefy.png" alt="Sefy"></a>
  <a href="https://rosyfilter.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/rosyfilter.jpg" alt="Rosyfilter"></a>
  <a href="https://dannarchy.com/"><img src="https://scenequeen.neocities.org/buttons/neo/dann.gif" alt="Dannarchy"></a>
  <a href="https://sixtoesss.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/sixtoes.gif" alt="Six Toes"></a>
  <a href="https://sugarforbrains.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/sugarforbrains.gif" alt="Sugar For Brains"></a>
  <a href="https://nostalgic.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/nostalgic.gif" alt="Nostalgic"></a>
  <a href="https://lurvervi.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/lurvervi.png" alt="Lurvervi"></a>
  <a href="https://macchiato.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/mac.png" alt="Macchiato"></a>
  <a href="https://m4g3-0f-t1m3.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/mages.gif" alt="Mage of Time"></a>
  <a href="https://incessantpain.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/ipain.gif" alt="Incessant Pain"></a>
  <a href="https://fennergy.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/fenne.gif" alt="Fennergy"></a>
  <a href="https://kakashi.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/kakashi.gif" alt="Kakashi"></a>
  <a href="https://lambdafun.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/lambda.png" alt="LambdaFun"></a>
  <a href="https://trashparadise.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/trashparadise.png" alt="Trash Paradise"></a>
  <a href="https://angel99.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/angel.png" alt="Angel"></a>
  <a href="https://mace486.com/"><img src="https://scenequeen.neocities.org/buttons/neo/mace.png" alt="Mace"></a>
  <a href="https://menmy.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/menmy.gif" alt="Menmy"></a>
  <a href="https://calei2copi0.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/calei2copi0.gif" alt="Calei2copi0"></a>
  <a href="https://klonpa.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/peche.gif" alt="Peche"></a>
  <a href="https://misswannabe.neocities.org/"><img src="https://scenequeen.neocities.org/p/mine/misswannabe.png" alt="Miss Wannabe"></a>
  <a href="https://pilssken.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/snakev.gif" alt="SnakeV"></a>
  <a href="https://hhgreggcult.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/gregg.png" alt="Gregg"></a>
  <a href="https://theteaparty.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/teaparty.png" alt="Tea Party"></a>
  <a href="https://beanbottles.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/beangrunge.gif" alt="Bean Bottles"></a>
  <!-- Scenequeen stickers continued -->
  <a href="https://sparklelollipop.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/sparklelollipop.gif" alt="Sparkle Lollipop"></a>
  <a href="https://encounters.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/encounters.gif" alt="Encounters"></a>
  <a href="https://machinecat.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/machinecat.gif" alt="Machine Cat"></a>
  <a href="https://vilespace.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/vilespace.gif" alt="Vilespace"></a>
  <a href="https://angel.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/angel.png" alt="Angel"></a>
  <a href="https://trashparadise.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/trashparadise.png" alt="Trash Paradise"></a>
  <a href="https://sparklelollipop.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/sparklelollipop.gif" alt="Sparkle Lollipop"></a>
  <a href="https://oracle.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/oracle.png" alt="Oracle"></a>
  <a href="https://stockinganarchy.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/stock.png" alt="Stocking Anarchy"></a>
  <a href="https://cubertown.neocities.org/"><img src="https://scenequeen.neocities.org/buttons/neo/cuber.png" alt="Cubertown"></a>
  <!-- …and so on for the rest of Scenequeen’s button archive … -->

  <!-- Warak stickers -->
  <a href="https://warak.neocities.org/"><img src="https://warak.neocities.org/pages/warakdex/szs%20back.jpg" alt="Warak SZS Back"></a>
  <a href="https://warak.neocities.org/"><img src="https://warak.neocities.org/pages/warakdex/scissor%20bitch.png" alt="Warak Scissor"></a>
  <a href="https://warak.neocities.org/"><img src="https://warak.neocities.org/pages/warakdex/soremachi.png" alt="Warak Soremachi"></a>
  <a href="https://warak.neocities.org/"><img src="https://warak.neocities.org/pages/warakdex/kafuka.png" alt="Warak Kafuka"></a>
  <a href="https://warak.neocities.org/"><img src="https://warak.neocities.org/pages/warakdex/dreamcasko.png" alt="Warak Dreamcasko"></a>
  <a href="https://warak.neocities.org/"><img src="https://warak.neocities.org/pages/warakdex/frutiger%20swirl%20green.png" alt="Warak Frutiger Green"></a>
  <a href="https://warak.neocities.org/"><img src="https://warak.neocities.org/pages/warakdex/frutiger%20swirl%20black.png" alt="Warak Frutiger Black"></a>
  <a href="https://warak.neocities.org/"><img src="https://warak.neocities.org/pages/warakdex/bakuman.png" alt="Warak Bakuman"></a>
  <a href="https://warak.neocities.org/"><img src="https://warak.neocities.org/pages/warakdex/fuckyourose.png" alt="Warak Rose"></a>
  <a href="https://warak.neocities.org/"><img src="https://warak.neocities.org/pages/warakdex/jimmy%20humming%20hare%20hare%20youkai%20but%20also%20hes%20evil%20here.jpg" alt="Warak Jimmy Evil"></a>
  <a href="https://warak.neocities.org/"><img src="https://i.postimg.cc/3JxjLLNj/lopster-yuki-button-2.gif" alt="Warak Site Button"></a>

  <div class="flex-container">
    <a href="https://nozascorner.neocities.org/"><img src="/webringimages/nora.gif" alt="NORAS CORNER" width="88" height="31"></a>
    <a href="https://psionicblades.neocities.org/"><img src="/webringimages/psibutton.gif" alt="Cyberpunk Corner" width="88" height="31"></a>
    <a href="https://locknchase.neocities.org/"><img src="webringimages/login_dont_logout.gif" alt="LOGIN DON'T LOGOUT" width="88" height="31"></a>
    <a href="https://themaczone.neocities.org/"><img src="webringimages/maczone_deux.gif" alt="maczone" style="image-rendering: pixelated;" width="88" height="31"></a>
    <a href="https://nosleepforme.neocities.org/"><img src="/webringimages/no-sleep.png" alt="No Sleep" width="88" height="31"></a>
    <a href="https://psychicnewborn.neocities.org/"><img src="/webringimages/newborn.gif" alt="psychic newborn" width="88" height="31"></a>
    <a href="https://sitcomtheory.neocities.org/"><img style="image-rendering: pixelated" class="top" draggable="false" src="/webringimages/sitcombutton.gif" width="88" height="31"></a>
    <a href="https://yukki.dev/"><img src="/webringimages/yukkidev_button.gif" alt="yukki.dev" width="88" height="31"></a>
    <a href="http://xslendi.xyz"><img src="/webringimages/slendi.png" alt="SlendiOS" width="88" height="31"></a>
    <!-- ... all your other existing links ... -->
    <a href="https://ataeria.neocities.org"><img src="webringimages/ataeriabutton.gif" alt="the website of ATAERIA" width="88" height="31"></a>
    <!-- NEW ADDITION -->
    <a href="https://wiredcollective.neocities.org/" target="project_cy_content_frame" onclick="naviaAddressBarUpdateFromLinkClick2(this)"><img src="https://wiredcollective.neocities.org/webringimages/wiredcollectivebutton.png" alt="WIRED COLLECTIVE WEBRING" width="88" height="31"></a>
  </div>
</footer>

<script type="module">
  // --- Firebase SDK Imports ---
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-analytics.js";
  import { 
    getFirestore, doc, getDoc, setDoc, collection, addDoc, query, orderBy, onSnapshot 
  } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  // --- Firebase Configuration ---
  const firebaseConfig = {
    apiKey: "AIzaSyC5m7Lkk2OdtL4KI3Z5A82HBx3gNBUVpOg",
    authDomain: "nicholas-tritsaris.firebaseapp.com",
    projectId: "nicholas-tritsaris",
    storageBucket: "nicholas-tritsaris.firebasestorage.app",
    messagingSenderId: "614514816130",
    appId: "1:614514816130:web:0b1a337f4182d86faaf09b",
    measurementId: "G-DS2QQ476X6"
  };

  // --- Initialize Firebase ---
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore();

  // --- HIT COUNTER ---
  const counterEl = document.getElementById('count');
  const counterRef = doc(db, 'stats', 'hits');
  let currentCount = 0;

  async function incrementHit() {
    const docSnap = await getDoc(counterRef);
    if (!docSnap.exists()) {
      await setDoc(counterRef, { count: 1 });
      currentCount = 1;
    } else {
      currentCount = docSnap.data().count + 1;
      await setDoc(counterRef, { count: currentCount });
    }
    counterEl.textContent = currentCount;
  }

  incrementHit();

  onSnapshot(counterRef, snapshot => {
    const newCount = snapshot.data()?.count ?? 0;
    if (newCount !== currentCount) {
      currentCount = newCount;
      counterEl.textContent = currentCount;
    }
  });

  // --- GUESTBOOK ---
  const guestNameInput = document.getElementById('guestName');
  const guestMsgInput = document.getElementById('guestMsg');
  const guestListEl = document.getElementById('guestList');
  const guestsRef = collection(db, 'guestbook');
  const q = query(guestsRef, orderBy('timestamp'));

  // Maintain a map of doc IDs to avoid full rewrites
  const guestMap = new Map();

  window.addGuest = async function() {
    const name = guestNameInput.value.trim();
    const msg = guestMsgInput.value.trim();
    if (!name || !msg) return alert('Enter both name and message.');

    await addDoc(guestsRef, {
      name,
      msg,
      timestamp: Date.now()
    });

    guestNameInput.value = '';
    guestMsgInput.value = '';
  }

  onSnapshot(q, snapshot => {
    snapshot.docChanges().forEach(change => {
      const docId = change.doc.id;
      const g = change.doc.data();

      if (change.type === "added") {
        const div = document.createElement('div');
        div.id = `guest-${docId}`;
        div.innerHTML = `<strong>${g.name}</strong>: ${g.msg}`;
        guestListEl.appendChild(div);
        guestMap.set(docId, div);
      } else if (change.type === "modified") {
        const div = guestMap.get(docId);
        if (div) div.innerHTML = `<strong>${g.name}</strong>: ${g.msg}`;
      } else if (change.type === "removed") {
        const div = guestMap.get(docId);
        if (div) {
          guestListEl.removeChild(div);
          guestMap.delete(docId);
        }
      }
    });
  });
</script>
</body>
</html>
